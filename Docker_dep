FROM nersc/ubuntu-mpi:18.04

# Update PATH
ENV PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:${PATH}"

# Install zlib development package
RUN apt-get update && \
    apt-get install -y zlib1g-dev

# Install JPEG development package
RUN apt-get install -y libjpeg-dev

# Install dependencies
RUN apt-get install -y python3-pip python3-numpy && \
    pip3 install --upgrade numpy && \
    pip3 install neuron && \
    pip3 install netpyne